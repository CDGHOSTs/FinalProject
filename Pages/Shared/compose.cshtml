@page
@model FinalProject.Pages.composeModel
@{
}
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Compose New Email</title>
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css" />
</head>
<body>
    <div class="container">
        <div class="row justify-content-center">
            <div class="col-md-8">
                <div class="email-compose-container">
                    <h2 class="text-center">Compose New Email</h2>
                    <form method="post">
                        <div class="form-group">
                            <label for="to">To:</label>
                            <input type="text" class="form-control" id="to" name="NewEmail.EmailReceiver" required>
                        </div>
                        <div class="form-group">
                            <label for="subject">Subject:</label>
                            <input type="text" class="form-control" id="subject" name="NewEmail.EmailSubject" required>
                        </div>
                        <div class="form-group">
                            <label for="message">Message:</label>
                            <textarea class="form-control" id="message" name="NewEmail.EmailMessage" rows="6" required></textarea>
                        </div>
                        <button type="submit" class="btn btn-primary btn-block btn-light text-danger flex-fill font-weight-bold">Send</button>
                        <a href="/Index" class="btn btn-primary btn-block btn-light text-danger flex-fill font-weight-bold">Home</a>
                    </form>
                </div>
                @if (TempData["EmailSent"] as string == "true")
                {
                    <div id="success-popup" class="popup success">
                        @TempData["SuccessMessage"]
                    </div>
                }
                else if (TempData["EmailSent"] as string == "false")
                {
                    <div id="error-popup" class="popup error">
                        @TempData["ErrorMessage"]
                    </div>
                }
            </div>
        </div>
    </div>
    <script src="https://code.jquery.com/jquery-3.5.1.slim.min.js"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>

    <!-- JavaScript to show/hide the pop-up -->
    <script>
        // Function to show the pop-up with a given ID
        function showPopup(popupId) {
            var popup = document.getElementById(popupId);
            if (popup) {
                popup.style.display = "block";
                setTimeout(function () {
                    popup.style.display = "none";
                }, 3000); // Hide the pop-up after 3 seconds (adjust as needed)
            }
        }

        // Check TempData values and show the appropriate pop-up
        var emailSent = "@TempData["EmailSent"]";
        if (emailSent === "true") {
            showPopup("success-popup");
        } else if (emailSent === "false") {
            showPopup("error-popup");
        }
    </script>

    <style>
        body {
            background-color: #9D0000;
        }

        .email-compose-container {
            background-color: #9D0000;
            border-radius: 8px;
            padding: 20px;
            margin-top: 50px;
            box-shadow: 0 4px 8px rgba(0,0,0,.05);
        }

        .form-control, .btn {
            margin-bottom: 15px;
        }
        /* Button styles */
        .btn-primary {
            background-color: #ffffff; /* White background */
            color: #ff0000; /* Red text */
            border: 1px solid #ff0000; /* Red border */
        }

            .btn-primary:hover {
                background-color: #ff0000; /* Red background */
                color: #ffffff; /* White text */
                border-color: #ff0000; /* Red border */
            }

            .btn-primary:focus,
            .btn-primary.focus {
                background-color: #ffffff !important; /* White background */
                color: #ff0000 !important; /* Red text */
                border-color: #ff0000 !important; /* Red border */
                box-shadow: none !important; /* Removes the default Bootstrap box-shadow */
            }

            /* Override Bootstrap's :active state for buttons */
            .btn-primary:not(:disabled):not(.disabled):active,
            .btn-primary:not(:disabled):not(.disabled).active,
            .show > .btn-primary.dropdown-toggle {
                background-color: #ffffff !important; /* White background */
                color: #ff0000 !important; /* Red text */
                border-color: #ff0000 !important; /* Red border */
            }

                /* Also override the :active:focus state to prevent the blue color */
                .btn-primary:not(:disabled):not(.disabled):active:focus,
                .btn-primary:not(:disabled):not(.disabled).active:focus,
                .show > .btn-primary.dropdown-toggle:focus {
                    box-shadow: none !important; /* Removes the default Bootstrap box-shadow */
                }


        /* Styles for input fields and labels */
        .email-compose-container h2,
        .email-compose-container label {
            color: #ffffff; /* White text */
        }

        /* Styles for input fields and labels */
        .email-compose-container h2,
        .email-compose-container label {
            color: #ffffff; /* White text */
        }

        .form-control {
            color: #000000; /* Black text for input */
            background-color: #ffffff; /* White background */
            border: 1px solid #ffffff; /* White border */
        }

            .form-control::placeholder {
                color: #000000; /* Black placeholder text */
                opacity: 1; /* Full opacity for placeholder */
            }

            .form-control:focus {
                border-color: #ff0000; /* Red border when focused */
                box-shadow: none;
            }
    </style>

</body>
</html>